extends ../layout/admin.pug

block content
    div(class="mx-auto max-w-4xl px-4 mt-6")
        h1.text-2xl.font-bold.mb-4= tituloPagina

        if mensaje
            div.mb-6.p-3.bg-green-100.border.border-green-400.text-green-700.rounded
                p.text-sm= mensaje

        each usuario in usuarios
            div(class="bg-white shadow rounded p-4 mb-4")
                div(class="flex items-start justify-between mb-3")
                    div
                        p(class="text-lg font-semibold text-gray-900")= usuario.nombre
                        p(class="text-sm text-gray-600")= usuario.email
                        p(class="text-sm text-gray-500 mt-1") Rol: #{usuario.role}

                // Botones de acción
                div(class="flex gap-2")

                    // Editar usuario
                    a(href=`/auth/gestionar-usuarios/${usuario.id}/editar` class="flex-1 inline-flex items-center justify-center px-4 py-2 border border-orange-200 text-orange-700 text-sm font-semibold rounded-full hover:bg-orange-50 transition") Editar

                    // Eliminar usuario
                    form(method="POST" action='/auth/gestionar-usuarios' class="flex-1" noValidate)
                        input(type="hidden" name="_csrf" value=csrfToken )
                        input(type="hidden" name="usuarioId" value=usuario.id)
                        button(type="submit" class="w-full inline-flex items-center justify-center px-4 py-2 border border-red-200 text-red-700 text-sm font-semibold rounded-full hover:bg-red-50 transition cursor-pointer" onclick=`return confirm('¿Quieres eliminar a ${usuario.nombre}? Esta acción no se puede deshacer.')`) Eliminar
extends ../../layout/admin

block content
  div(class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8")
    .flex.justify-between.items-center.mb-6
      h1.text-3xl.font-bold.text-gray-900 Gestión de Categorías
      a(href="/admin/categorias/nueva" class="inline-flex items-center gap-2 px-4 py-2 border border-orange-600 text-orange-600 text-sm font-semibold rounded-full hover:bg-orange-50 transition")
        svg(class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24")
          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4")
        span Nueva Categoría

    if categorias && categorias.length > 0
      div(class="grid grid-cols-1 md:grid-cols-2 gap-4")
        each categoria in categorias
          .bg-white.rounded-xl.shadow-md.p-5.flex.flex-col.gap-3
            .flex.items-start.justify-between
              .space-y-1
                p.text-sm.text-gray-500 ID #{categoria.id}
                h2.text-xl.font-semibold.text-gray-900= categoria.nombre
                p.text-sm.text-gray-500 Slug: #{categoria.slug}
              if categoria.estado === 'activo'
                span.px-3.py-1.text-xs.font-semibold.rounded-md.bg-green-100.text-green-700 Activo
              else
                span.px-3.py-1.text-xs.font-semibold.rounded-md.bg-gray-200.text-gray-700 Inactivo

            if categoria.descripcion
              p.text-sm.text-gray-600= categoria.descripcion.length > 140 ? categoria.descripcion.substring(0, 140) + '…' : categoria.descripcion
            else
              p.text-sm.text-gray-400.italic Sin descripción

            div(class="flex flex-col sm:flex-row gap-2 pt-2")
              a(href=`/admin/categorias/editar/${categoria.id}` class="flex-1 inline-flex items-center justify-center px-4 py-2 border border-orange-200 rounded-full text-sm font-semibold text-orange-700 bg-white hover:bg-orange-50 transition") Editar
              form(method="POST" action=`/admin/categorias/eliminar/${categoria.id}` class="flex-1" onsubmit=`return confirm('¿Eliminar la categoría ${categoria.nombre}? Los productos asociados quedarán sin categoría.')`)
                input(type="hidden" name="_csrf" value=csrfToken)
                button(type="submit" class="w-full inline-flex items-center justify-center px-4 py-2 border border-red-200 text-red-700 text-sm font-semibold rounded-full bg-white hover:bg-red-50 transition cursor-pointer") Eliminar

    else
      .bg-white.rounded-xl.shadow-md.p-8.text-center
        h3.mt-2.text-lg.font-semibold.text-gray-900 No hay categorías
        p.mt-1.text-sm.text-gray-500 Comienza creando una nueva categoría para organizar tus productos.
        .mt-6
          a(href="/admin/categorias/nueva" class="inline-flex items-center px-4 py-2 border border-orange-600 text-orange-600 text-sm font-semibold rounded-full hover:bg-orange-50 transition") Nueva Categoría
